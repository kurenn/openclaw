services:
  - type: web
    name: openclaw
    runtime: docker
    plan: starter
    autoDeploy: true

    # OpenClaw UI is served by the gateway on the same port.
    healthCheckPath: /

    # IMPORTANT: dockerCommand must be a SINGLE STRING
    # Force bind to 0.0.0.0 (lan) and port = Render's $PORT
    dockerCommand: "sh -lc 'exec node dist/index.js gateway --allow-unconfigured --bind lan --port \"${PORT:-8080}\"'"

    envVars:
      - key: PORT
        value: "8080"

      # keep your existing vars
      - key: SETUP_PASSWORD
        sync: false

      - key: OPENCLAW_GATEWAY_TOKEN
        generateValue: true

      - key: OPENCLAW_STATE_DIR
        value: /data/.openclaw

      - key: OPENCLAW_WORKSPACE_DIR
        value: /data/workspace

    disk:
      name: openclaw-data
      mountPath: /data
      sizeGB: 10

