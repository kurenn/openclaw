services:
  - type: web
    name: openclaw
    runtime: docker
    plan: starter
    region: oregon
    autoDeploy: true

    # OpenClaw serves its UI on "/" (Getting Started points you to http://127.0.0.1:18789/).
    healthCheckPath: /

    # IMPORTANT:
    # - Render requires the process to listen on $PORT and be reachable (not 127.0.0.1 only).
    # - We run via bash so $PORT expands reliably.
    dockerCommand: >-
      bash -lc
      'exec openclaw gateway run
      --allow-unconfigured
      --bind lan
      --port "${PORT:-8080}"
      --auth password
      --password "${OPENCLAW_GATEWAY_PASSWORD}"'

    envVars:
      - key: PORT
        value: 8080

      - key: OPENCLAW_STATE_DIR
        value: /data/.openclaw

      - key: OPENCLAW_WORKSPACE_DIR
        value: /data/workspace

      # Set this in Render as a Secret (it will prompt you on first deploy)
      - key: OPENCLAW_GATEWAY_PASSWORD
        sync: false

    disk:
      name: openclaw-data
      mountPath: /data
      sizeGB: 10

